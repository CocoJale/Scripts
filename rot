local partyService = game:GetService("SomePartyService") -- Replace with actual service path
local p = game:GetService("Players").LocalPlayer
local w = game:GetService("Workspace")
local rf = game:GetService("ReplicatedStorage").Packages.Knit.Services.MonsterService.RF.RequestAttack

local function r(m)
    return m:FindFirstChild("HumanoidRootPart") or m:FindFirstChildWhichIsA("BasePart")
end

local function t(n)
    local c = p.Character or p.CharacterAdded:Wait()
    local hrp = r(c)
    if not hrp then return end
    for _, m in ipairs(w:GetDescendants()) do
        if m:IsA("Model") and m.Name:lower():find(n:lower()) then
            local tr = r(m)
            if tr then
                local h = c:FindFirstChildOfClass("Humanoid")
                if h and h.SeatPart then
                    h.Sit = false
                    task.wait(0.1)
                end
                hrp.CFrame = tr.CFrame
                task.wait(1)
            end
        end
    end
end

local function enableFloating()
    local RunService = game:GetService("RunService")
    local player = p
    local character = player.Character or player.CharacterAdded:Wait()
    local hrp = character:WaitForChild("HumanoidRootPart")

    local bodyVelocity = Instance.new("BodyVelocity")
    bodyVelocity.Velocity = Vector3.new(0, 0, 0)
    bodyVelocity.MaxForce = Vector3.new(0, math.huge, 0)
    bodyVelocity.Name = "FloatVelocity"
    bodyVelocity.Parent = hrp

    RunService.Heartbeat:Connect(function()
        if hrp and hrp:FindFirstChild("FloatVelocity") then
            hrp.FloatVelocity.Velocity = Vector3.new(0, 0, 0)
        end
    end)
end

local function createAndUpdateParty()
    -- Create Party
    partyService.CreateParty:InvokeServer({
        Difficulty = "Easy",
        Name = "GolfCatKi1082's Party",
        PartyType = "Solo",
        MapSelected = "Vault of Jupiter",
        MaxCount = 4,
        Ready = false
    }, "Vault of Jupiter")

    -- Update Party
    partyService.UpdateParty:InvokeServer({
        Difficulty = "Easy",
        Name = "GolfCatKi1082's Party",
        PartyType = "Public",
        MapSelected = "Vault of Jupiter",
        MaxCount = 4,
        Ready = true
    })
end

-- Run party creation/update first (blocking)
createAndUpdateParty()

-- Then enable floating
enableFloating()

-- Then teleport (runs in background, but sequentially after above)
task.spawn(function()
    while true do
        t("Pakrahmatmat")
        t("Rhino Rhino Toasterinoo")
        t("Ecco CavaIlo Virtuoso")
        t("Bisonte Giuppitur Giuppitercito")
        task.wait(1) -- Add small wait to prevent overload
    end
end)

-- Run the attack loop nonstop in parallel
task.spawn(function()
    while true do
        local char = p.Character or p.CharacterAdded:Wait()
        local hrp = char:FindFirstChild("HumanoidRootPart")
        if hrp then
            local pos = hrp.Position
            local dir = hrp.CFrame.LookVector
            rf:InvokeServer(CFrame.new(pos + dir * 5, pos + dir * 6)) -- direction-only
        end
        task.wait(0.03)
    end
end)
