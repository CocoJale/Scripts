local RunService = game:GetService("RunService")
local Players = game:GetService("Players")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

local swordModel = character:WaitForChild("SWORD_MODEL")

local primaryPart = swordModel.PrimaryPart or swordModel:FindFirstChild("Handle")
if not primaryPart then
    warn("SWORD_MODEL has no PrimaryPart or Handle!")
    return
end

for _, part in ipairs(swordModel:GetDescendants()) do
    if part:IsA("BasePart") then
        part.Anchored = true
    end
end

local floatAmplitude = 0.5
local floatSpeed = 2
local startTime = tick()

RunService.RenderStepped:Connect(function()
    if not character or not character:FindFirstChild("HumanoidRootPart") then return end

    local hrp = character.HumanoidRootPart.CFrame
    local backOffset = -5
    local verticalOffset = math.sin((tick() - startTime) * floatSpeed) * floatAmplitude
    local targetCFrame = hrp * CFrame.new(0, verticalOffset, backOffset)

    -- Move only the primary part of the sword floating behind the player
    primaryPart.CFrame = targetCFrame
end)
